{"remainingRequest":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/selector/src/composables/getDocument.js","dependencies":[{"path":"/Users/moritzmurauer/dev/selector/src/composables/getDocument.js","mtime":1617292202915},{"path":"/Users/moritzmurauer/dev/selector/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21vcml0em11cmF1ZXIvZGV2L3NlbGVjdG9yL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy/DhGhubGljaCB3aWUgVGhyaWxsc2Vla2VyIFByb2plY3QKaW1wb3J0IHsgd2F0Y2hFZmZlY3QsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHByb2plY3RGaXJlc3RvcmUgfSBmcm9tICcuLi9maXJlYmFzZS9jb25maWcnOwoKdmFyIGdldERvY3VtZW50ID0gZnVuY3Rpb24gZ2V0RG9jdW1lbnQoY29sbGVjdGlvbiwgaWQpIHsKICB2YXIgZG9jdW1lbnQgPSByZWYobnVsbCk7CiAgdmFyIGVycm9yID0gcmVmKG51bGwpOyAvLyByZWdpc3RlciB0aGUgZmlyZXN0b3JlIGNvbGxlY3Rpb24gcmVmZXJlbmNlCgogIHZhciBkb2N1bWVudFJlZiA9IHByb2plY3RGaXJlc3RvcmUuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5kb2MoaWQpOwogIHZhciB1bnN1YiA9IGRvY3VtZW50UmVmLm9uU25hcHNob3QoZnVuY3Rpb24gKGRvYykgewogICAgLy8gbmVlZCB0byBtYWtlIHN1cmUgdGhlIGRvYyBleGlzdHMgJiBoYXMgZGF0YQogICAgaWYgKGRvYy5kYXRhKCkpIHsKICAgICAgZG9jdW1lbnQudmFsdWUgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRvYy5kYXRhKCkpLCB7fSwgewogICAgICAgIGlkOiBkb2MuaWQKICAgICAgfSk7CiAgICAgIGVycm9yLnZhbHVlID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIGVycm9yLnZhbHVlID0gJ3RoYXQgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QnOwogICAgfQogIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTsKICAgIGVycm9yLnZhbHVlID0gJ3Byb2JsZW0gZmV0Y2hpbmcgdGhlIGRvY3VtZW50JzsKICB9KTsKICB3YXRjaEVmZmVjdChmdW5jdGlvbiAob25JbnZhbGlkYXRlKSB7CiAgICBvbkludmFsaWRhdGUoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdW5zdWIoKTsKICAgIH0pOwogIH0pOwogIHJldHVybiB7CiAgICBlcnJvcjogZXJyb3IsCiAgICBkb2N1bWVudDogZG9jdW1lbnQKICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgZ2V0RG9jdW1lbnQ7"},{"version":3,"sources":["/Users/moritzmurauer/dev/selector/src/composables/getDocument.js"],"names":["watchEffect","ref","projectFirestore","getDocument","collection","id","document","error","documentRef","doc","unsub","onSnapshot","data","value","err","console","log","message","onInvalidate"],"mappings":";AAAA;AAEA,SAASA,WAAT,EAAsBC,GAAtB,QAAiC,KAAjC;AACA,SAASC,gBAAT,QAAiC,oBAAjC;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,UAAD,EAAaC,EAAb,EAAoB;AAEtC,MAAIC,QAAQ,GAAGL,GAAG,CAAC,IAAD,CAAlB;AACA,MAAIM,KAAK,GAAGN,GAAG,CAAC,IAAD,CAAf,CAHsC,CAKtC;;AACA,MAAIO,WAAW,GAAGN,gBAAgB,CAACE,UAAjB,CAA4BA,UAA5B,EAAwCK,GAAxC,CAA4CJ,EAA5C,CAAlB;AAEA,MAAMK,KAAK,GAAGF,WAAW,CAACG,UAAZ,CAAuB,UAAAF,GAAG,EAAI;AAC1C;AACA,QAAGA,GAAG,CAACG,IAAJ,EAAH,EAAe;AACbN,MAAAA,QAAQ,CAACO,KAAT,mCAAqBJ,GAAG,CAACG,IAAJ,EAArB;AAAiCP,QAAAA,EAAE,EAAEI,GAAG,CAACJ;AAAzC;AACAE,MAAAA,KAAK,CAACM,KAAN,GAAc,IAAd;AACD,KAHD,MAIK;AACHN,MAAAA,KAAK,CAACM,KAAN,GAAc,8BAAd;AACD;AACF,GATa,EASX,UAAAC,GAAG,EAAI;AACRC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACAV,IAAAA,KAAK,CAACM,KAAN,GAAc,+BAAd;AACD,GAZa,CAAd;AAcAb,EAAAA,WAAW,CAAC,UAACkB,YAAD,EAAkB;AAC5BA,IAAAA,YAAY,CAAC;AAAA,aAAMR,KAAK,EAAX;AAAA,KAAD,CAAZ;AACD,GAFU,CAAX;AAIA,SAAO;AAAEH,IAAAA,KAAK,EAALA,KAAF;AAASD,IAAAA,QAAQ,EAARA;AAAT,GAAP;AAED,CA5BD;;AA8BA,eAAeH,WAAf","sourcesContent":["//Ã„hnlich wie Thrillseeker Project\n\nimport { watchEffect, ref } from 'vue'\nimport { projectFirestore } from '../firebase/config'\n\nconst getDocument = (collection, id) => {\n\n  let document = ref(null)\n  let error = ref(null)\n\n  // register the firestore collection reference\n  let documentRef = projectFirestore.collection(collection).doc(id)\n\n  const unsub = documentRef.onSnapshot(doc => {\n    // need to make sure the doc exists & has data\n    if(doc.data()) {\n      document.value = {...doc.data(), id: doc.id}\n      error.value = null\n    }\n    else {\n      error.value = 'that document does not exist'\n    }\n  }, err => {\n    console.log(err.message)\n    error.value = 'problem fetching the document'\n  })\n\n  watchEffect((onInvalidate) => {\n    onInvalidate(() => unsub())\n  });\n\n  return { error, document }\n\n}\n\nexport default getDocument"]}]}