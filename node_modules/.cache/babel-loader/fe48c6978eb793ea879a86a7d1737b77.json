{"remainingRequest":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/selector/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/moritzmurauer/dev/selector/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/moritzmurauer/dev/selector/src/views/posts/CreatePost.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/moritzmurauer/dev/selector/src/views/posts/CreatePost.vue","mtime":1617292607106},{"path":"/Users/moritzmurauer/dev/selector/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvbW9yaXR6bXVyYXVlci9kZXYvc2VsZWN0b3Ivbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyByZWYgfSBmcm9tICd2dWUnOwppbXBvcnQgTmF2YmFyIGZyb20gJ0AvY29tcG9uZW50cy9OYXZiYXIudnVlJzsKaW1wb3J0IHVzZVN0b3JhZ2UgZnJvbSAnQC9jb21wb3NhYmxlcy91c2VTdG9yYWdlJzsKaW1wb3J0IHVzZUNvbGxlY3Rpb24gZnJvbSAnQC9jb21wb3NhYmxlcy91c2VDb2xsZWN0aW9uJzsKaW1wb3J0IGdldFVzZXIgZnJvbSAnQC9jb21wb3NhYmxlcy9nZXRVc2VyJzsKaW1wb3J0IHsgdGltZXN0YW1wIH0gZnJvbSAnQC9maXJlYmFzZS9jb25maWcnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIE5hdmJhcjogTmF2YmFyCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgX3VzZVN0b3JhZ2UgPSB1c2VTdG9yYWdlKCksCiAgICAgICAgZmlsZVBhdGggPSBfdXNlU3RvcmFnZS5maWxlUGF0aCwKICAgICAgICB1cmwgPSBfdXNlU3RvcmFnZS51cmwsCiAgICAgICAgdXBsb2FkSW1hZ2UgPSBfdXNlU3RvcmFnZS51cGxvYWRJbWFnZTsKCiAgICB2YXIgX3VzZUNvbGxlY3Rpb24gPSB1c2VDb2xsZWN0aW9uKCdwb3N0cycpLAogICAgICAgIGVycm9yID0gX3VzZUNvbGxlY3Rpb24uZXJyb3IsCiAgICAgICAgYWRkRG9jID0gX3VzZUNvbGxlY3Rpb24uYWRkRG9jOwoKICAgIHZhciBfZ2V0VXNlciA9IGdldFVzZXIoKSwKICAgICAgICB1c2VyID0gX2dldFVzZXIudXNlcjsKCiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgdGl0bGUgPSByZWYoJycpOwogICAgdmFyIGRlc2NyaXB0aW9uID0gcmVmKCcnKTsKICAgIHZhciBmaWxlID0gcmVmKG51bGwpOwogICAgdmFyIGZpbGVFcnJvciA9IHJlZihudWxsKTsKICAgIHZhciBpc1BlbmRpbmcgPSByZWYoZmFsc2UpOyAvLyBwb3N0IGdldHMgY3JlYXRlZCB3aXRoIGluZm9ybWF0aW9uIGZyb20gZm9ybQoKICAgIHZhciBoYW5kbGVTdWJtaXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghZmlsZS52YWx1ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaXNQZW5kaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHVwbG9hZEltYWdlKGZpbGUudmFsdWUpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBhZGREb2MoewogICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUudmFsdWUsCiAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi52YWx1ZSwKICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VyLnZhbHVlLnVpZCwKICAgICAgICAgICAgICAgICAgdXNlck5hbWU6IHVzZXIudmFsdWUuZGlzcGxheU5hbWUsCiAgICAgICAgICAgICAgICAgIGNvdmVyVXJsOiB1cmwudmFsdWUsCiAgICAgICAgICAgICAgICAgIGZpbGVQYXRoOiBmaWxlUGF0aC52YWx1ZSwKICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBpc1BlbmRpbmcudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoIWVycm9yLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScsCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgICBpZDogcmVzLmlkCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsgLy8gYWxsb3dlZCBmaWxlIHR5cGVzCgoKICAgIHZhciB0eXBlcyA9IFsnaW1hZ2UvcG5nJywgJ2ltYWdlL2pwZWcnXTsgLy8gaW1hZ2UgdXBsb2FkCgogICAgdmFyIGhhbmRsZUNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZShlKSB7CiAgICAgIHZhciBzZWxlY3RlZCA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICBjb25zb2xlLmxvZyhzZWxlY3RlZCk7CgogICAgICBpZiAoc2VsZWN0ZWQgJiYgdHlwZXMuaW5jbHVkZXMoc2VsZWN0ZWQudHlwZSkpIHsKICAgICAgICBmaWxlLnZhbHVlID0gc2VsZWN0ZWQ7CiAgICAgICAgZmlsZUVycm9yLnZhbHVlID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaWxlLnZhbHVlID0gbnVsbDsKICAgICAgICBmaWxlRXJyb3IudmFsdWUgPSAnUGxlYXNlIHNlbGVjdCBhbiBpbWFnZSBmaWxlIChwbmcgb3IganBnKSc7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6IHRpdGxlLAogICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sCiAgICAgIGhhbmRsZVN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICBmaWxlRXJyb3I6IGZpbGVFcnJvciwKICAgICAgaGFuZGxlQ2hhbmdlOiBoYW5kbGVDaGFuZ2UsCiAgICAgIGlzUGVuZGluZzogaXNQZW5kaW5nCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["/Users/moritzmurauer/dev/selector/src/views/posts/CreatePost.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Navbar />\n  <div class=\"background-create\">\n    <form @submit.prevent=\"handleSubmit\">\n      <h4>Create a New Post</h4>\n\n      <!-- text information -->\n      <input type=\"text\" required placeholder=\"Post title\" v-model=\"title\">\n      <textarea required placeholder=\"Post description...\" v-model=\"description\"></textarea>\n      <!-- upload Post image -->\n      <label>Upload Post Cover Image</label>\n      <input type=\"file\" @change=\"handleChange\">\n      <div class=\"error\">{{ fileError }}</div>\n\n      <button v-if=\"!isPending\">Post</button>\n      <button v-else disabled>Saving...</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport Navbar from '@/components/Navbar.vue'\nimport useStorage from '@/composables/useStorage'\nimport useCollection from '@/composables/useCollection'\nimport getUser from '@/composables/getUser'\nimport { timestamp } from '@/firebase/config'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  components: {Navbar},\n  setup() {\n    const { filePath, url, uploadImage } = useStorage()\n    const { error, addDoc } = useCollection('posts')\n    const { user } = getUser()\n    const router = useRouter()\n\n    const title = ref('')\n    const description = ref('')\n    const file = ref(null)\n    const fileError = ref(null)\n    const isPending = ref(false)\n\n  // post gets created with information from form\n    const handleSubmit = async () => {\n      if (file.value) {\n        isPending.value = true\n        await uploadImage(file.value)\n        const res = await addDoc({\n          title: title.value,\n          description: description.value,\n          userId: user.value.uid,\n          userName: user.value.displayName,\n          coverUrl: url.value,\n          filePath: filePath.value,\n          createdAt: timestamp()\n        })\n        isPending.value = false\n        if (!error.value) {\n          router.push({ name: 'Home', params: { id: res.id }})\n        }\n      }\n    }\n\n    // allowed file types\n    const types = ['image/png', 'image/jpeg']\n\n    // image upload\n    const handleChange = (e) => {\n      let selected = e.target.files[0]\n      console.log(selected)\n\n      if (selected && types.includes(selected.type)) {\n        file.value = selected\n        fileError.value = null\n      } else {\n        file.value = null\n        fileError.value = 'Please select an image file (png or jpg)'\n      }\n    }\n    \n    return { title, description, handleSubmit, fileError, handleChange, isPending }\n  }\n}\n</script>\n\n<style>\n  form {\n    background: white;\n  }\n  input[type=\"file\"] {\n    border: 0;\n    padding: 0;\n  }\n\n\n  textarea {\n    height: 200px;\n  }\n\n\n  label {\n    font-size: 12px;\n    display: block;\n    margin-top: 30px;\n  }\n  button {\n    margin-top: 20px;\n  }\n</style>"],"sourceRoot":""}]}