{"remainingRequest":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/composables/useStorage.js","dependencies":[{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/composables/useStorage.js","mtime":1617292539857},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tb3JpdHptdXJhdWVyL2Rldi9hcC9hYnNjaGx1c3MtcHJ1ZWZ1bmcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovL8OEaG5saWNoIHdpZSBUaHJpbGxzZWVrZXIgUHJvamVjdAppbXBvcnQgeyBwcm9qZWN0U3RvcmFnZSB9IGZyb20gJy4uL2ZpcmViYXNlL2NvbmZpZyc7CmltcG9ydCB7IHJlZiB9IGZyb20gInZ1ZSI7CmltcG9ydCBnZXRVc2VyIGZyb20gIi4vZ2V0VXNlciI7Cgp2YXIgX2dldFVzZXIgPSBnZXRVc2VyKCksCiAgICB1c2VyID0gX2dldFVzZXIudXNlcjsKCnZhciB1c2VTdG9yYWdlID0gZnVuY3Rpb24gdXNlU3RvcmFnZSgpIHsKICB2YXIgZXJyb3IgPSByZWYobnVsbCk7CiAgdmFyIHVybCA9IHJlZihudWxsKTsKICB2YXIgZmlsZVBhdGggPSByZWYobnVsbCk7IC8vIGltYWdlIGdldHMgdXBsb2FkZWQKCiAgdmFyIHVwbG9hZEltYWdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGZpbGUpIHsKICAgICAgdmFyIHN0b3JhZ2VSZWYsIHJlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGZpbGVQYXRoLnZhbHVlID0gImNvdmVycy8iLmNvbmNhdCh1c2VyLnZhbHVlLnVpZCwgIi8iKS5jb25jYXQoZmlsZS5uYW1lKTsKICAgICAgICAgICAgICBzdG9yYWdlUmVmID0gcHJvamVjdFN0b3JhZ2UucmVmKGZpbGVQYXRoLnZhbHVlKTsKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gc3RvcmFnZVJlZi5wdXQoZmlsZSk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gcmVzLnJlZi5nZXREb3dubG9hZFVSTCgpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHVybC52YWx1ZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgyKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dC50MC5tZXNzYWdlKTsKICAgICAgICAgICAgICBlcnJvci52YWx1ZSA9IF9jb250ZXh0LnQwOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCAxMV1dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gdXBsb2FkSW1hZ2UoX3gpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOyAvLyBkZWxldGluZyBhbiBpbWFnZSBmdW5jdGlvbgoKCiAgdmFyIGRlbGV0ZUltYWdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocGF0aCkgewogICAgICB2YXIgc3RvcmFnZVJlZjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdG9yYWdlUmVmID0gcHJvamVjdFN0b3JhZ2UucmVmKHBhdGgpOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHN0b3JhZ2VSZWYuZGVsZXRlKCk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0Mi50MC5tZXNzYWdlKTsKICAgICAgICAgICAgICBlcnJvci52YWx1ZSA9IF9jb250ZXh0Mi50MDsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1sxLCA2XV0pOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBkZWxldGVJbWFnZShfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgcmV0dXJuIHsKICAgIHVwbG9hZEltYWdlOiB1cGxvYWRJbWFnZSwKICAgIGRlbGV0ZUltYWdlOiBkZWxldGVJbWFnZSwKICAgIHVybDogdXJsLAogICAgZmlsZVBhdGg6IGZpbGVQYXRoLAogICAgZXJyb3I6IGVycm9yCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHVzZVN0b3JhZ2U7"},{"version":3,"sources":["/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/composables/useStorage.js"],"names":["projectStorage","ref","getUser","user","useStorage","error","url","filePath","uploadImage","file","value","uid","name","storageRef","put","res","getDownloadURL","console","log","message","deleteImage","path","delete"],"mappings":";;;;AAAA;AAEA,SAASA,cAAT,QAA+B,oBAA/B;AACA,SAASC,GAAT,QAAoB,KAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;;eAEiBA,OAAO,E;IAAhBC,I,YAAAA,I;;AAER,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,MAAMC,KAAK,GAAGJ,GAAG,CAAC,IAAD,CAAjB;AACA,MAAMK,GAAG,GAAGL,GAAG,CAAC,IAAD,CAAf;AACA,MAAMM,QAAQ,GAAGN,GAAG,CAAC,IAAD,CAApB,CAHuB,CAKvB;;AACA,MAAMO,WAAW;AAAA,uEAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAClBF,cAAAA,QAAQ,CAACG,KAAT,oBAA2BP,IAAI,CAACO,KAAL,CAAWC,GAAtC,cAA6CF,IAAI,CAACG,IAAlD;AACMC,cAAAA,UAFY,GAECb,cAAc,CAACC,GAAf,CAAmBM,QAAQ,CAACG,KAA5B,CAFD;AAAA;AAAA;AAAA,qBAKEG,UAAU,CAACC,GAAX,CAAeL,IAAf,CALF;;AAAA;AAKVM,cAAAA,GALU;AAAA;AAAA,qBAMEA,GAAG,CAACd,GAAJ,CAAQe,cAAR,EANF;;AAAA;AAMhBV,cAAAA,GAAG,CAACI,KANY;AAAA;AAAA;;AAAA;AAAA;AAAA;AAQhBO,cAAAA,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB;AACAd,cAAAA,KAAK,CAACK,KAAN;;AATgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXF,WAAW;AAAA;AAAA;AAAA,KAAjB,CANuB,CAmBvB;;;AACA,MAAMY,WAAW;AAAA,wEAAG,kBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACZR,cAAAA,UADY,GACCb,cAAc,CAACC,GAAf,CAAmBoB,IAAnB,CADD;AAAA;AAAA;AAAA,qBAIVR,UAAU,CAACS,MAAX,EAJU;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAMhBL,cAAAA,OAAO,CAACC,GAAR,CAAY,aAAIC,OAAhB;AACAd,cAAAA,KAAK,CAACK,KAAN;;AAPgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXU,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAWA,SAAO;AAAEZ,IAAAA,WAAW,EAAXA,WAAF;AAAeY,IAAAA,WAAW,EAAXA,WAAf;AAA4Bd,IAAAA,GAAG,EAAHA,GAA5B;AAAiCC,IAAAA,QAAQ,EAARA,QAAjC;AAA2CF,IAAAA,KAAK,EAALA;AAA3C,GAAP;AACD,CAhCD;;AAkCA,eAAeD,UAAf","sourcesContent":["//Ã„hnlich wie Thrillseeker Project\n\nimport { projectStorage } from '../firebase/config'\nimport { ref } from \"vue\"\nimport getUser from \"./getUser\"\n\nconst { user } = getUser()\n\nconst useStorage = () => {\n  const error = ref(null)\n  const url = ref(null)\n  const filePath = ref(null)\n\n  // image gets uploaded\n  const uploadImage = async (file) => {\n    filePath.value = `covers/${user.value.uid}/${file.name}`\n    const storageRef = projectStorage.ref(filePath.value)\n\n    try {\n      const res = await storageRef.put(file)\n      url.value = await res.ref.getDownloadURL()\n    } catch (err) {\n      console.log(err.message)\n      error.value = err\n    }\n  }\n\n  // deleting an image function\n  const deleteImage = async (path) => {\n    const storageRef = projectStorage.ref(path);\n\n    try {\n      await storageRef.delete()\n    } catch (err) {\n      console.log(err.message)\n      error.value = err\n    }\n  }\n\n  return { uploadImage, deleteImage, url, filePath, error }\n}\n\nexport default useStorage;"]}]}