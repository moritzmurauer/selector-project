{"remainingRequest":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/selector/src/composables/useSignup.js","dependencies":[{"path":"/Users/moritzmurauer/dev/selector/src/composables/useSignup.js","mtime":1667536251975},{"path":"/Users/moritzmurauer/dev/selector/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21vcml0em11cmF1ZXIvZGV2L3NlbGVjdG9yL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgcHJvamVjdEF1dGggfSBmcm9tICIuLi9maXJlYmFzZS9jb25maWciOwppbXBvcnQgeyBwcm9qZWN0RmlyZXN0b3JlIH0gZnJvbSAiLi4vZmlyZWJhc2UvY29uZmlnIjsgLy8gcmVmcyAmIHNpZ251cCBvdXRzaWRlIG9mIGV4cG9ydGVkIGZ1bmN0aW9uCi8vIHRoZXkgZG9uJ3QgbmVlZCB0byBiZSByZS1jcmVhdGVkIGV2ZXJ5IHRpbWUgd2UgaW52b2tlIHVzZVNpZ251cAoKdmFyIGVycm9yID0gcmVmKG51bGwpOwp2YXIgaXNQZW5kaW5nID0gcmVmKGZhbHNlKTsgLy8gQ3JlYXRlIGEgbmV3IFVzZXIgYW5kIHNpZ24gaGltIHVwIHdpdGggdGhlIGlucHV0IGhlIGZpbGxlZCBpbgoKdmFyIHNpZ251cCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZW1haWwsIHBhc3N3b3JkLCBkaXNwbGF5TmFtZSwgc3R5bGUpIHsKICAgIHZhciByZXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGVycm9yLnZhbHVlID0gbnVsbDsKICAgICAgICAgICAgaXNQZW5kaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gcHJvamVjdEF1dGguY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBjb21wbGV0ZSBzaWdudXAiKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIHByb2plY3RGaXJlc3RvcmUuY29sbGVjdGlvbigidXNlcnMiKS5kb2MocmVzLnVzZXIudWlkKS5zZXQoewogICAgICAgICAgICAgIHN0eWxlOiBzdHlsZSwKICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogZGlzcGxheU5hbWUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICByZXR1cm4gcmVzLnVzZXIudXBkYXRlUHJvZmlsZSh7CiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGVycm9yLnZhbHVlID0gbnVsbDsKICAgICAgICAgICAgaXNQZW5kaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlcyk7CgogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE3OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dC50MC5tZXNzYWdlKTsKICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBfY29udGV4dC50MC5tZXNzYWdlOwogICAgICAgICAgICBpc1BlbmRpbmcudmFsdWUgPSBmYWxzZTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMiwgMTddXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gc2lnbnVwKF94LCBfeDIsIF94MywgX3g0KSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciB1c2VTaWdudXAgPSBmdW5jdGlvbiB1c2VTaWdudXAoKSB7CiAgcmV0dXJuIHsKICAgIGVycm9yOiBlcnJvciwKICAgIHNpZ251cDogc2lnbnVwLAogICAgaXNQZW5kaW5nOiBpc1BlbmRpbmcKICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgdXNlU2lnbnVwOw=="},{"version":3,"sources":["/Users/moritzmurauer/dev/selector/src/composables/useSignup.js"],"names":["ref","projectAuth","projectFirestore","error","isPending","signup","email","password","displayName","style","value","createUserWithEmailAndPassword","res","Error","collection","doc","user","uid","set","updateProfile","console","log","message","useSignup"],"mappings":";;AAAA,SAASA,GAAT,QAAoB,KAApB;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,SAASC,gBAAT,QAAiC,oBAAjC,C,CAEA;AACA;;AACA,IAAMC,KAAK,GAAGH,GAAG,CAAC,IAAD,CAAjB;AACA,IAAMI,SAAS,GAAGJ,GAAG,CAAC,KAAD,CAArB,C,CAEA;;AACA,IAAMK,MAAM;AAAA,qEAAG,iBAAOC,KAAP,EAAcC,QAAd,EAAwBC,WAAxB,EAAqCC,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AACbN,YAAAA,KAAK,CAACO,KAAN,GAAc,IAAd;AACAN,YAAAA,SAAS,CAACM,KAAV,GAAkB,IAAlB;AAFa;AAAA;AAAA,mBAKOT,WAAW,CAACU,8BAAZ,CAChBL,KADgB,EAEhBC,QAFgB,CALP;;AAAA;AAKLK,YAAAA,GALK;;AAAA,gBASNA,GATM;AAAA;AAAA;AAAA;;AAAA,kBAUH,IAAIC,KAAJ,CAAU,2BAAV,CAVG;;AAAA;AAAA;AAAA,mBAYLX,gBAAgB,CACnBY,UADG,CACQ,OADR,EAEHC,GAFG,CAECH,GAAG,CAACI,IAAJ,CAASC,GAFV,EAGHC,GAHG,CAGC;AAAET,cAAAA,KAAK,EAALA,KAAF;AAASD,cAAAA,WAAW,EAAXA;AAAT,aAHD,CAZK;;AAAA;AAAA;AAAA,mBAgBLI,GAAG,CAACI,IAAJ,CAASG,aAAT,CAAuB;AAAEX,cAAAA,WAAW,EAAXA;AAAF,aAAvB,CAhBK;;AAAA;AAiBXL,YAAAA,KAAK,CAACO,KAAN,GAAc,IAAd;AACAN,YAAAA,SAAS,CAACM,KAAV,GAAkB,KAAlB;AAlBW,6CAmBJE,GAnBI;;AAAA;AAAA;AAAA;AAqBXQ,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB;AACAnB,YAAAA,KAAK,CAACO,KAAN,GAAc,YAAIY,OAAlB;AACAlB,YAAAA,SAAS,CAACM,KAAV,GAAkB,KAAlB;;AAvBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAANL,MAAM;AAAA;AAAA;AAAA,GAAZ;;AA2BA,IAAMkB,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,SAAO;AAAEpB,IAAAA,KAAK,EAALA,KAAF;AAASE,IAAAA,MAAM,EAANA,MAAT;AAAiBD,IAAAA,SAAS,EAATA;AAAjB,GAAP;AACD,CAFD;;AAIA,eAAemB,SAAf","sourcesContent":["import { ref } from \"vue\";\nimport { projectAuth } from \"../firebase/config\";\nimport { projectFirestore } from \"../firebase/config\";\n\n// refs & signup outside of exported function\n// they don't need to be re-created every time we invoke useSignup\nconst error = ref(null);\nconst isPending = ref(false);\n\n// Create a new User and sign him up with the input he filled in\nconst signup = async (email, password, displayName, style) => {\n  error.value = null;\n  isPending.value = true;\n\n  try {\n    const res = await projectAuth.createUserWithEmailAndPassword(\n      email,\n      password\n    );\n    if (!res) {\n      throw new Error(\"Could not complete signup\");\n    }\n    await projectFirestore\n      .collection(\"users\")\n      .doc(res.user.uid)\n      .set({ style, displayName });\n    await res.user.updateProfile({ displayName });\n    error.value = null;\n    isPending.value = false;\n    return res;\n  } catch (err) {\n    console.log(err.message);\n    error.value = err.message;\n    isPending.value = false;\n  }\n};\n\nconst useSignup = () => {\n  return { error, signup, isPending };\n};\n\nexport default useSignup;\n"]}]}