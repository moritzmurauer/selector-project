{"remainingRequest":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/selector/src/composables/useSignup.js","dependencies":[{"path":"/Users/moritzmurauer/dev/selector/src/composables/useSignup.js","mtime":1676791516480},{"path":"/Users/moritzmurauer/dev/selector/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21vcml0em11cmF1ZXIvZGV2L3NlbGVjdG9yL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgcHJvamVjdEF1dGggfSBmcm9tICIuLi9maXJlYmFzZS9jb25maWciOwppbXBvcnQgeyBwcm9qZWN0RmlyZXN0b3JlIH0gZnJvbSAiLi4vZmlyZWJhc2UvY29uZmlnIjsgLy8gcmVmcyAmIHNpZ251cCBvdXRzaWRlIG9mIGV4cG9ydGVkIGZ1bmN0aW9uCi8vIHRoZXkgZG9uJ3QgbmVlZCB0byBiZSByZS1jcmVhdGVkIGV2ZXJ5IHRpbWUgd2UgaW52b2tlIHVzZVNpZ251cAoKdmFyIGVycm9yID0gcmVmKG51bGwpOwp2YXIgaXNQZW5kaW5nID0gcmVmKGZhbHNlKTsgLy8gQ3JlYXRlIGEgbmV3IFVzZXIgYW5kIHNpZ24gaGltIHVwIHdpdGggdGhlIGlucHV0IGhlIGZpbGxlZCBpbgoKdmFyIHNpZ251cCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZW1haWwsIHBhc3N3b3JkLCBkaXNwbGF5TmFtZSwgc3R5bGUsIGdyaWQpIHsKICAgIHZhciByZXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGVycm9yLnZhbHVlID0gbnVsbDsKICAgICAgICAgICAgaXNQZW5kaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gcHJvamVjdEF1dGguY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBjb21wbGV0ZSBzaWdudXAiKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIHByb2plY3RGaXJlc3RvcmUuY29sbGVjdGlvbigidXNlcnMiKS5kb2MocmVzLnVzZXIudWlkKS5zZXQoewogICAgICAgICAgICAgIHN0eWxlOiBzdHlsZSwKICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogZGlzcGxheU5hbWUsCiAgICAgICAgICAgICAgZ3JpZDogZ3JpZAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgIHJldHVybiByZXMudXNlci51cGRhdGVQcm9maWxlKHsKICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogZGlzcGxheU5hbWUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBudWxsOwogICAgICAgICAgICBpc1BlbmRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzKTsKCiAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTc7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwLm1lc3NhZ2UpOwogICAgICAgICAgICBlcnJvci52YWx1ZSA9IF9jb250ZXh0LnQwLm1lc3NhZ2U7CiAgICAgICAgICAgIGlzUGVuZGluZy52YWx1ZSA9IGZhbHNlOwoKICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCAxN11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBzaWdudXAoX3gsIF94MiwgX3gzLCBfeDQsIF94NSkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7Cgp2YXIgdXNlU2lnbnVwID0gZnVuY3Rpb24gdXNlU2lnbnVwKCkgewogIHJldHVybiB7CiAgICBlcnJvcjogZXJyb3IsCiAgICBzaWdudXA6IHNpZ251cCwKICAgIGlzUGVuZGluZzogaXNQZW5kaW5nCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHVzZVNpZ251cDs="},{"version":3,"sources":["/Users/moritzmurauer/dev/selector/src/composables/useSignup.js"],"names":["ref","projectAuth","projectFirestore","error","isPending","signup","email","password","displayName","style","grid","value","createUserWithEmailAndPassword","res","Error","collection","doc","user","uid","set","updateProfile","console","log","message","useSignup"],"mappings":";;AAAA,SAASA,GAAT,QAAoB,KAApB;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,SAASC,gBAAT,QAAiC,oBAAjC,C,CAEA;AACA;;AACA,IAAMC,KAAK,GAAGH,GAAG,CAAC,IAAD,CAAjB;AACA,IAAMI,SAAS,GAAGJ,GAAG,CAAC,KAAD,CAArB,C,CAEA;;AACA,IAAMK,MAAM;AAAA,qEAAG,iBAAOC,KAAP,EAAcC,QAAd,EAAwBC,WAAxB,EAAqCC,KAArC,EAA4CC,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AACbP,YAAAA,KAAK,CAACQ,KAAN,GAAc,IAAd;AACAP,YAAAA,SAAS,CAACO,KAAV,GAAkB,IAAlB;AAFa;AAAA;AAAA,mBAKOV,WAAW,CAACW,8BAAZ,CAChBN,KADgB,EAEhBC,QAFgB,CALP;;AAAA;AAKLM,YAAAA,GALK;;AAAA,gBASNA,GATM;AAAA;AAAA;AAAA;;AAAA,kBAUH,IAAIC,KAAJ,CAAU,2BAAV,CAVG;;AAAA;AAAA;AAAA,mBAYLZ,gBAAgB,CACnBa,UADG,CACQ,OADR,EAEHC,GAFG,CAECH,GAAG,CAACI,IAAJ,CAASC,GAFV,EAGHC,GAHG,CAGC;AAAEV,cAAAA,KAAK,EAALA,KAAF;AAASD,cAAAA,WAAW,EAAXA,WAAT;AAAsBE,cAAAA,IAAI,EAAJA;AAAtB,aAHD,CAZK;;AAAA;AAAA;AAAA,mBAgBLG,GAAG,CAACI,IAAJ,CAASG,aAAT,CAAuB;AAAEZ,cAAAA,WAAW,EAAXA;AAAF,aAAvB,CAhBK;;AAAA;AAiBXL,YAAAA,KAAK,CAACQ,KAAN,GAAc,IAAd;AACAP,YAAAA,SAAS,CAACO,KAAV,GAAkB,KAAlB;AAlBW,6CAmBJE,GAnBI;;AAAA;AAAA;AAAA;AAqBXQ,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB;AACApB,YAAAA,KAAK,CAACQ,KAAN,GAAc,YAAIY,OAAlB;AACAnB,YAAAA,SAAS,CAACO,KAAV,GAAkB,KAAlB;;AAvBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAANN,MAAM;AAAA;AAAA;AAAA,GAAZ;;AA2BA,IAAMmB,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,SAAO;AAAErB,IAAAA,KAAK,EAALA,KAAF;AAASE,IAAAA,MAAM,EAANA,MAAT;AAAiBD,IAAAA,SAAS,EAATA;AAAjB,GAAP;AACD,CAFD;;AAIA,eAAeoB,SAAf","sourcesContent":["import { ref } from \"vue\";\nimport { projectAuth } from \"../firebase/config\";\nimport { projectFirestore } from \"../firebase/config\";\n\n// refs & signup outside of exported function\n// they don't need to be re-created every time we invoke useSignup\nconst error = ref(null);\nconst isPending = ref(false);\n\n// Create a new User and sign him up with the input he filled in\nconst signup = async (email, password, displayName, style, grid) => {\n  error.value = null;\n  isPending.value = true;\n\n  try {\n    const res = await projectAuth.createUserWithEmailAndPassword(\n      email,\n      password\n    );\n    if (!res) {\n      throw new Error(\"Could not complete signup\");\n    }\n    await projectFirestore\n      .collection(\"users\")\n      .doc(res.user.uid)\n      .set({ style, displayName, grid });\n    await res.user.updateProfile({ displayName });\n    error.value = null;\n    isPending.value = false;\n    return res;\n  } catch (err) {\n    console.log(err.message);\n    error.value = err.message;\n    isPending.value = false;\n  }\n};\n\nconst useSignup = () => {\n  return { error, signup, isPending };\n};\n\nexport default useSignup;\n"]}]}