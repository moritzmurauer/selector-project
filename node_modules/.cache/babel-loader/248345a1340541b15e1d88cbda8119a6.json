{"remainingRequest":"/Users/moritzmurauer/dev/ap/muso-ninjas/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/ap/muso-ninjas/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/moritzmurauer/dev/ap/muso-ninjas/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/moritzmurauer/dev/ap/muso-ninjas/src/views/playlists/PlaylistDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/moritzmurauer/dev/ap/muso-ninjas/src/views/playlists/PlaylistDetails.vue","mtime":1606756817000},{"path":"/Users/moritzmurauer/dev/ap/muso-ninjas/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/ap/muso-ninjas/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/ap/muso-ninjas/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/ap/muso-ninjas/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21vcml0em11cmF1ZXIvZGV2L2FwL211c28tbmluamFzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8gY2hhbGxlbmdlCi8vICAgLSBhdHRhY2ggYSBjbGljayBoYW5kbGVyIHRvIHRoZSBkZWxldGUgKHNvbmcpIGJ1dHRvbiBjYWxsZWQgaGFuZGxlQ2xpY2sKLy8gICAtIGluc2lkZSB0aGUgZnVuY3Rpb24sIHVzZSB0aGUgdXBkYXRlRG9jIGZ1bmN0aW9uIHRvIGRlbGV0ZSB0aGF0IHNvbmcKLy8gICAtIHlvdSdsbCBuZWVkIHRvIHBhc3MgdGhlIHNvbmcgaWQgaW50byB0aGUgaGFuZGxlQ2xpY2sgZnVuY3Rpb24KLy8gICAtIEhJTlQ6IHVzZSB0aGUgZmlsdGVyIG1ldGhvZAppbXBvcnQgQWRkU29uZyBmcm9tICdAL2NvbXBvbmVudHMvQWRkU29uZy52dWUnOwppbXBvcnQgdXNlU3RvcmFnZSBmcm9tICdAL2NvbXBvc2FibGVzL3VzZVN0b3JhZ2UnOwppbXBvcnQgdXNlRG9jdW1lbnQgZnJvbSAnQC9jb21wb3NhYmxlcy91c2VEb2N1bWVudCc7CmltcG9ydCBnZXREb2N1bWVudCBmcm9tICdAL2NvbXBvc2FibGVzL2dldERvY3VtZW50JzsKaW1wb3J0IGdldFVzZXIgZnJvbSAnQC9jb21wb3NhYmxlcy9nZXRVc2VyJzsKaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ2lkJ10sCiAgY29tcG9uZW50czogewogICAgQWRkU29uZzogQWRkU29uZwogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKHByb3BzKSB7CiAgICB2YXIgX2dldERvY3VtZW50ID0gZ2V0RG9jdW1lbnQoJ3BsYXlsaXN0cycsIHByb3BzLmlkKSwKICAgICAgICBlcnJvciA9IF9nZXREb2N1bWVudC5lcnJvciwKICAgICAgICBwbGF5bGlzdCA9IF9nZXREb2N1bWVudC5kb2N1bWVudDsKCiAgICB2YXIgX2dldFVzZXIgPSBnZXRVc2VyKCksCiAgICAgICAgdXNlciA9IF9nZXRVc2VyLnVzZXI7CgogICAgdmFyIF91c2VEb2N1bWVudCA9IHVzZURvY3VtZW50KCdwbGF5bGlzdHMnLCBwcm9wcy5pZCksCiAgICAgICAgZGVsZXRlRG9jID0gX3VzZURvY3VtZW50LmRlbGV0ZURvYywKICAgICAgICB1cGRhdGVEb2MgPSBfdXNlRG9jdW1lbnQudXBkYXRlRG9jOwoKICAgIHZhciBfdXNlU3RvcmFnZSA9IHVzZVN0b3JhZ2UoKSwKICAgICAgICBkZWxldGVJbWFnZSA9IF91c2VTdG9yYWdlLmRlbGV0ZUltYWdlOwoKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICAgIHZhciBvd25lcnNoaXAgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBwbGF5bGlzdC52YWx1ZSAmJiB1c2VyLnZhbHVlICYmIHVzZXIudmFsdWUudWlkID09IHBsYXlsaXN0LnZhbHVlLnVzZXJJZDsKICAgIH0pOwoKICAgIHZhciBoYW5kbGVEZWxldGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGVEb2MoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlSW1hZ2UocGxheWxpc3QudmFsdWUuZmlsZVBhdGgpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICdIb21lJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlRGVsZXRlKCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgdmFyIGhhbmRsZUNsaWNrID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihpZCkgewogICAgICAgIHZhciBzb25nczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc29uZ3MgPSBwbGF5bGlzdC52YWx1ZS5zb25ncy5maWx0ZXIoZnVuY3Rpb24gKHNvbmcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvbmcuaWQgIT0gaWQ7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVEb2MoewogICAgICAgICAgICAgICAgICBzb25nczogc29uZ3MKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3gpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gewogICAgICBlcnJvcjogZXJyb3IsCiAgICAgIHBsYXlsaXN0OiBwbGF5bGlzdCwKICAgICAgb3duZXJzaGlwOiBvd25lcnNoaXAsCiAgICAgIGhhbmRsZURlbGV0ZTogaGFuZGxlRGVsZXRlLAogICAgICBoYW5kbGVDbGljazogaGFuZGxlQ2xpY2sKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/Users/moritzmurauer/dev/ap/muso-ninjas/src/views/playlists/PlaylistDetails.vue"],"names":[],"mappings":";;;AAgCA;AACA;AACA;AACA;AACA;AAEA,OAAO,OAAP,MAAoB,0BAApB;AACA,OAAO,UAAP,MAAuB,0BAAvB;AACA,OAAO,WAAP,MAAwB,2BAAxB;AACA,OAAO,WAAP,MAAwB,2BAAxB;AACA,OAAO,OAAP,MAAoB,uBAApB;AACA,SAAS,QAAT,QAAyB,KAAzB;AACA,SAAS,SAAT,QAA0B,YAA1B;AAEA,eAAe;AACb,EAAA,KAAK,EAAE,CAAC,IAAD,CADM;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,OAAM,EAAN;AAAF,GAFC;AAGb,EAAA,KAHa,iBAGP,KAHO,EAGA;AAAA,uBAC2B,WAAW,CAAC,WAAD,EAAc,KAAK,CAAC,EAApB,CADtC;AAAA,QACH,KADG,gBACH,KADG;AAAA,QACc,QADd,gBACI,QADJ;;AAAA,mBAEM,OAAO,EAFb;AAAA,QAEH,IAFG,YAEH,IAFG;;AAAA,uBAGsB,WAAW,CAAC,WAAD,EAAc,KAAK,CAAC,EAApB,CAHjC;AAAA,QAGH,SAHG,gBAGH,SAHG;AAAA,QAGQ,SAHR,gBAGQ,SAHR;;AAAA,sBAIa,UAAU,EAJvB;AAAA,QAIH,WAJG,eAIH,WAJG;;AAKX,QAAM,MAAK,GAAI,SAAS,EAAxB;AAEA,QAAM,SAAQ,GAAI,QAAQ,CAAC,YAAM;AAC/B,aAAO,QAAQ,CAAC,KAAT,IACF,IAAI,CAAC,KADH,IAEF,IAAI,CAAC,KAAL,CAAW,GAAX,IAAkB,QAAQ,CAAC,KAAT,CAAe,MAFtC;AAGD,KAJyB,CAA1B;;AAMA,QAAM,YAAW;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACb,SAAS,EADI;;AAAA;AAAA;AAAA,uBAEb,WAAW,CAAC,QAAQ,CAAC,KAAT,CAAe,QAAhB,CAFE;;AAAA;AAGnB,gBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,kBAAA,IAAI,EAAE;AAAR,iBAAZ;;AAHmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAX,YAAW;AAAA;AAAA;AAAA,OAAjB;;AAMA,QAAM,WAAU;AAAA,0EAAI,kBAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACZ,gBAAA,KADY,GACJ,QAAQ,CAAC,KAAT,CAAe,KAAf,CAAqB,MAArB,CAA4B,UAAC,IAAD;AAAA,yBAAU,IAAI,CAAC,EAAL,IAAW,EAArB;AAAA,iBAA5B,CADI;AAAA;AAAA,uBAEZ,SAAS,CAAC;AAAE,kBAAA,KAAI,EAAJ;AAAF,iBAAD,CAFG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAV,WAAU;AAAA;AAAA;AAAA,OAAhB;;AAKA,WAAO;AAAE,MAAA,KAAK,EAAL,KAAF;AAAS,MAAA,QAAQ,EAAR,QAAT;AAAmB,MAAA,SAAS,EAAT,SAAnB;AAA8B,MAAA,YAAY,EAAZ,YAA9B;AAA4C,MAAA,WAAU,EAAV;AAA5C,KAAP;AACF;AA5Ba,CAAf","sourcesContent":["<template>\n  <div class=\"error\" v-if=\"error\">{{ error }}</div>\n  <div v-if=\"playlist\" class=\"playlist-details\">\n\n    <!-- playlist information -->\n    <div class=\"playlist-info\">\n      <div class=\"cover\">\n        <img :src=\"playlist.coverUrl\">\n      </div>\n      <h2>{{ playlist.title }}</h2>\n      <p class=\"username\">Created by {{ playlist.userName }}</p>\n      <p class=\"description\">{{ playlist.description }}</p>\n      <button v-if=\"ownership\" @click=\"handleDelete\">Delete Playlist</button>\n    </div>\n\n    <!-- song list -->\n    <div class=\"song-list\">\n      <div v-if=\"!playlist.songs.length\">No songs have been added to this playlist yet.</div>\n      <div v-for=\"song in playlist.songs\" :key=\"song.id\" class=\"single-song\">\n        <div class=\"details\">\n          <h3>{{ song.title }}</h3>\n          <p>{{ song.artist }}</p>\n        </div>\n        <button v-if=\"ownership\" @click=\"handleClick(song.id)\">delete</button>\n      </div>\n      <AddSong :playlist=\"playlist\" />\n    </div>\n    \n  </div>\n</template>\n\n<script>\n// challenge\n//   - attach a click handler to the delete (song) button called handleClick\n//   - inside the function, use the updateDoc function to delete that song\n//   - you'll need to pass the song id into the handleClick function\n//   - HINT: use the filter method\n\nimport AddSong from '@/components/AddSong.vue'\nimport useStorage from '@/composables/useStorage'\nimport useDocument from '@/composables/useDocument'\nimport getDocument from '@/composables/getDocument'\nimport getUser from '@/composables/getUser'\nimport { computed } from 'vue'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  props: ['id'],\n  components: { AddSong },\n  setup(props) {\n    const { error, document: playlist } = getDocument('playlists', props.id)\n    const { user } = getUser()\n    const { deleteDoc, updateDoc } = useDocument('playlists', props.id)\n    const { deleteImage } = useStorage()\n    const router = useRouter()\n\n    const ownership = computed(() => {\n      return playlist.value \n        && user.value \n        && user.value.uid == playlist.value.userId\n    })\n\n    const handleDelete = async () => {\n      await deleteDoc()\n      await deleteImage(playlist.value.filePath)\n      router.push({ name: 'Home' })\n    }\n\n    const handleClick = async (id) => {\n      const songs = playlist.value.songs.filter((song) => song.id != id)\n      await updateDoc({ songs })\n    }\n\n    return { error, playlist, ownership, handleDelete, handleClick }\n  }\n}\n</script>\n\n<style>\n  .playlist-details {\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    gap: 80px;\n  }\n  .cover {\n    overflow: hidden;\n    border-radius: 20px;\n    position: relative;\n    padding: 160px;\n  }\n  .cover img {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    min-width: 100%;\n    min-height: 100%;\n    max-width: 200%;\n    max-height: 200%;\n  }\n  .playlist-info {\n    text-align: center;\n  }\n  .playlist-info h2 {\n    text-transform: capitalize;\n    font-size: 28px;\n    margin-top: 20px;\n  }\n  .playlist-info p {\n    margin-bottom: 20px;\n  }\n  .username {\n    color: #999;\n  }\n  .description {\n    text-align: left;\n  }\n  .single-song {\n    padding: 10px 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px dashed var(--secondary);\n    margin-bottom: 20px;\n  }\n</style>"],"sourceRoot":""}]}