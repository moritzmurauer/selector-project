{"remainingRequest":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/composables/getDocument.js","dependencies":[{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/composables/getDocument.js","mtime":1606756817000},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL21vcml0em11cmF1ZXIvZGV2L2FwL2Fic2NobHVzcy1wcnVlZnVuZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IHdhdGNoRWZmZWN0LCByZWYgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBwcm9qZWN0RmlyZXN0b3JlIH0gZnJvbSAnLi4vZmlyZWJhc2UvY29uZmlnJzsKCnZhciBnZXREb2N1bWVudCA9IGZ1bmN0aW9uIGdldERvY3VtZW50KGNvbGxlY3Rpb24sIGlkKSB7CiAgdmFyIGRvY3VtZW50ID0gcmVmKG51bGwpOwogIHZhciBlcnJvciA9IHJlZihudWxsKTsgLy8gcmVnaXN0ZXIgdGhlIGZpcmVzdG9yZSBjb2xsZWN0aW9uIHJlZmVyZW5jZQoKICB2YXIgZG9jdW1lbnRSZWYgPSBwcm9qZWN0RmlyZXN0b3JlLmNvbGxlY3Rpb24oY29sbGVjdGlvbikuZG9jKGlkKTsKICB2YXIgdW5zdWIgPSBkb2N1bWVudFJlZi5vblNuYXBzaG90KGZ1bmN0aW9uIChkb2MpIHsKICAgIC8vIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBkb2MgZXhpc3RzICYgaGFzIGRhdGEKICAgIGlmIChkb2MuZGF0YSgpKSB7CiAgICAgIGRvY3VtZW50LnZhbHVlID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkb2MuZGF0YSgpKSwge30sIHsKICAgICAgICBpZDogZG9jLmlkCiAgICAgIH0pOwogICAgICBlcnJvci52YWx1ZSA9IG51bGw7CiAgICB9IGVsc2UgewogICAgICBlcnJvci52YWx1ZSA9ICd0aGF0IGRvY3VtZW50IGRvZXMgbm90IGV4aXN0JzsKICAgIH0KICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7CiAgICBlcnJvci52YWx1ZSA9ICdwcm9ibGVtIGZldGNoaW5nIHRoZSBkb2N1bWVudCc7CiAgfSk7CiAgd2F0Y2hFZmZlY3QoZnVuY3Rpb24gKG9uSW52YWxpZGF0ZSkgewogICAgb25JbnZhbGlkYXRlKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHVuc3ViKCk7CiAgICB9KTsKICB9KTsKICByZXR1cm4gewogICAgZXJyb3I6IGVycm9yLAogICAgZG9jdW1lbnQ6IGRvY3VtZW50CiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IGdldERvY3VtZW50Ow=="},{"version":3,"sources":["/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/composables/getDocument.js"],"names":["watchEffect","ref","projectFirestore","getDocument","collection","id","document","error","documentRef","doc","unsub","onSnapshot","data","value","err","console","log","message","onInvalidate"],"mappings":";AAAA,SAASA,WAAT,EAAsBC,GAAtB,QAAiC,KAAjC;AACA,SAASC,gBAAT,QAAiC,oBAAjC;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,UAAD,EAAaC,EAAb,EAAoB;AAEtC,MAAIC,QAAQ,GAAGL,GAAG,CAAC,IAAD,CAAlB;AACA,MAAIM,KAAK,GAAGN,GAAG,CAAC,IAAD,CAAf,CAHsC,CAKtC;;AACA,MAAIO,WAAW,GAAGN,gBAAgB,CAACE,UAAjB,CAA4BA,UAA5B,EAAwCK,GAAxC,CAA4CJ,EAA5C,CAAlB;AAEA,MAAMK,KAAK,GAAGF,WAAW,CAACG,UAAZ,CAAuB,UAAAF,GAAG,EAAI;AAC1C;AACA,QAAGA,GAAG,CAACG,IAAJ,EAAH,EAAe;AACbN,MAAAA,QAAQ,CAACO,KAAT,mCAAqBJ,GAAG,CAACG,IAAJ,EAArB;AAAiCP,QAAAA,EAAE,EAAEI,GAAG,CAACJ;AAAzC;AACAE,MAAAA,KAAK,CAACM,KAAN,GAAc,IAAd;AACD,KAHD,MAIK;AACHN,MAAAA,KAAK,CAACM,KAAN,GAAc,8BAAd;AACD;AACF,GATa,EASX,UAAAC,GAAG,EAAI;AACRC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACAV,IAAAA,KAAK,CAACM,KAAN,GAAc,+BAAd;AACD,GAZa,CAAd;AAcAb,EAAAA,WAAW,CAAC,UAACkB,YAAD,EAAkB;AAC5BA,IAAAA,YAAY,CAAC;AAAA,aAAMR,KAAK,EAAX;AAAA,KAAD,CAAZ;AACD,GAFU,CAAX;AAIA,SAAO;AAAEH,IAAAA,KAAK,EAALA,KAAF;AAASD,IAAAA,QAAQ,EAARA;AAAT,GAAP;AAED,CA5BD;;AA8BA,eAAeH,WAAf","sourcesContent":["import { watchEffect, ref } from 'vue'\nimport { projectFirestore } from '../firebase/config'\n\nconst getDocument = (collection, id) => {\n\n  let document = ref(null)\n  let error = ref(null)\n\n  // register the firestore collection reference\n  let documentRef = projectFirestore.collection(collection).doc(id)\n\n  const unsub = documentRef.onSnapshot(doc => {\n    // need to make sure the doc exists & has data\n    if(doc.data()) {\n      document.value = {...doc.data(), id: doc.id}\n      error.value = null\n    }\n    else {\n      error.value = 'that document does not exist'\n    }\n  }, err => {\n    console.log(err.message)\n    error.value = 'problem fetching the document'\n  })\n\n  watchEffect((onInvalidate) => {\n    onInvalidate(() => unsub())\n  });\n\n  return { error, document }\n\n}\n\nexport default getDocument"]}]}