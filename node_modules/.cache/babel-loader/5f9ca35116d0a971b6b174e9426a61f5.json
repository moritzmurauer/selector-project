{"remainingRequest":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/views/playlists/PlaylistDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/views/playlists/PlaylistDetails.vue","mtime":1606756817000},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21vcml0em11cmF1ZXIvZGV2L2FwL2Fic2NobHVzcy1wcnVlZnVuZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vIGNoYWxsZW5nZQovLyAgIC0gYXR0YWNoIGEgY2xpY2sgaGFuZGxlciB0byB0aGUgZGVsZXRlIChzb25nKSBidXR0b24gY2FsbGVkIGhhbmRsZUNsaWNrCi8vICAgLSBpbnNpZGUgdGhlIGZ1bmN0aW9uLCB1c2UgdGhlIHVwZGF0ZURvYyBmdW5jdGlvbiB0byBkZWxldGUgdGhhdCBzb25nCi8vICAgLSB5b3UnbGwgbmVlZCB0byBwYXNzIHRoZSBzb25nIGlkIGludG8gdGhlIGhhbmRsZUNsaWNrIGZ1bmN0aW9uCi8vICAgLSBISU5UOiB1c2UgdGhlIGZpbHRlciBtZXRob2QKaW1wb3J0IEFkZFNvbmcgZnJvbSAnQC9jb21wb25lbnRzL0FkZFNvbmcudnVlJzsKaW1wb3J0IHVzZVN0b3JhZ2UgZnJvbSAnQC9jb21wb3NhYmxlcy91c2VTdG9yYWdlJzsKaW1wb3J0IHVzZURvY3VtZW50IGZyb20gJ0AvY29tcG9zYWJsZXMvdXNlRG9jdW1lbnQnOwppbXBvcnQgZ2V0RG9jdW1lbnQgZnJvbSAnQC9jb21wb3NhYmxlcy9nZXREb2N1bWVudCc7CmltcG9ydCBnZXRVc2VyIGZyb20gJ0AvY29tcG9zYWJsZXMvZ2V0VXNlcic7CmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWydpZCddLAogIGNvbXBvbmVudHM6IHsKICAgIEFkZFNvbmc6IEFkZFNvbmcKICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcykgewogICAgdmFyIF9nZXREb2N1bWVudCA9IGdldERvY3VtZW50KCdwbGF5bGlzdHMnLCBwcm9wcy5pZCksCiAgICAgICAgZXJyb3IgPSBfZ2V0RG9jdW1lbnQuZXJyb3IsCiAgICAgICAgcGxheWxpc3QgPSBfZ2V0RG9jdW1lbnQuZG9jdW1lbnQ7CgogICAgdmFyIF9nZXRVc2VyID0gZ2V0VXNlcigpLAogICAgICAgIHVzZXIgPSBfZ2V0VXNlci51c2VyOwoKICAgIHZhciBfdXNlRG9jdW1lbnQgPSB1c2VEb2N1bWVudCgncGxheWxpc3RzJywgcHJvcHMuaWQpLAogICAgICAgIGRlbGV0ZURvYyA9IF91c2VEb2N1bWVudC5kZWxldGVEb2MsCiAgICAgICAgdXBkYXRlRG9jID0gX3VzZURvY3VtZW50LnVwZGF0ZURvYzsKCiAgICB2YXIgX3VzZVN0b3JhZ2UgPSB1c2VTdG9yYWdlKCksCiAgICAgICAgZGVsZXRlSW1hZ2UgPSBfdXNlU3RvcmFnZS5kZWxldGVJbWFnZTsKCiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgb3duZXJzaGlwID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcGxheWxpc3QudmFsdWUgJiYgdXNlci52YWx1ZSAmJiB1c2VyLnZhbHVlLnVpZCA9PSBwbGF5bGlzdC52YWx1ZS51c2VySWQ7CiAgICB9KTsKCiAgICB2YXIgaGFuZGxlRGVsZXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZGVsZXRlRG9jKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZUltYWdlKHBsYXlsaXN0LnZhbHVlLmZpbGVQYXRoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZURlbGV0ZSgpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHZhciBoYW5kbGVDbGljayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoaWQpIHsKICAgICAgICB2YXIgc29uZ3M7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHNvbmdzID0gcGxheWxpc3QudmFsdWUuc29uZ3MuZmlsdGVyKGZ1bmN0aW9uIChzb25nKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzb25nLmlkICE9IGlkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRG9jKHsKICAgICAgICAgICAgICAgICAgc29uZ3M6IHNvbmdzCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKF94KSB7CiAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgcmV0dXJuIHsKICAgICAgZXJyb3I6IGVycm9yLAogICAgICBwbGF5bGlzdDogcGxheWxpc3QsCiAgICAgIG93bmVyc2hpcDogb3duZXJzaGlwLAogICAgICBoYW5kbGVEZWxldGU6IGhhbmRsZURlbGV0ZSwKICAgICAgaGFuZGxlQ2xpY2s6IGhhbmRsZUNsaWNrCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/views/playlists/PlaylistDetails.vue"],"names":[],"mappings":";;;AAgCA;AACA;AACA;AACA;AACA;AAEA,OAAO,OAAP,MAAoB,0BAApB;AACA,OAAO,UAAP,MAAuB,0BAAvB;AACA,OAAO,WAAP,MAAwB,2BAAxB;AACA,OAAO,WAAP,MAAwB,2BAAxB;AACA,OAAO,OAAP,MAAoB,uBAApB;AACA,SAAS,QAAT,QAAyB,KAAzB;AACA,SAAS,SAAT,QAA0B,YAA1B;AAEA,eAAe;AACb,EAAA,KAAK,EAAE,CAAC,IAAD,CADM;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,OAAM,EAAN;AAAF,GAFC;AAGb,EAAA,KAHa,iBAGP,KAHO,EAGA;AAAA,uBAC2B,WAAW,CAAC,WAAD,EAAc,KAAK,CAAC,EAApB,CADtC;AAAA,QACH,KADG,gBACH,KADG;AAAA,QACc,QADd,gBACI,QADJ;;AAAA,mBAEM,OAAO,EAFb;AAAA,QAEH,IAFG,YAEH,IAFG;;AAAA,uBAGsB,WAAW,CAAC,WAAD,EAAc,KAAK,CAAC,EAApB,CAHjC;AAAA,QAGH,SAHG,gBAGH,SAHG;AAAA,QAGQ,SAHR,gBAGQ,SAHR;;AAAA,sBAIa,UAAU,EAJvB;AAAA,QAIH,WAJG,eAIH,WAJG;;AAKX,QAAM,MAAK,GAAI,SAAS,EAAxB;AAEA,QAAM,SAAQ,GAAI,QAAQ,CAAC,YAAM;AAC/B,aAAO,QAAQ,CAAC,KAAT,IACF,IAAI,CAAC,KADH,IAEF,IAAI,CAAC,KAAL,CAAW,GAAX,IAAkB,QAAQ,CAAC,KAAT,CAAe,MAFtC;AAGD,KAJyB,CAA1B;;AAMA,QAAM,YAAW;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACb,SAAS,EADI;;AAAA;AAAA;AAAA,uBAEb,WAAW,CAAC,QAAQ,CAAC,KAAT,CAAe,QAAhB,CAFE;;AAAA;AAGnB,gBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,kBAAA,IAAI,EAAE;AAAR,iBAAZ;;AAHmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAX,YAAW;AAAA;AAAA;AAAA,OAAjB;;AAMA,QAAM,WAAU;AAAA,0EAAI,kBAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACZ,gBAAA,KADY,GACJ,QAAQ,CAAC,KAAT,CAAe,KAAf,CAAqB,MAArB,CAA4B,UAAC,IAAD;AAAA,yBAAU,IAAI,CAAC,EAAL,IAAW,EAArB;AAAA,iBAA5B,CADI;AAAA;AAAA,uBAEZ,SAAS,CAAC;AAAE,kBAAA,KAAI,EAAJ;AAAF,iBAAD,CAFG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAV,WAAU;AAAA;AAAA;AAAA,OAAhB;;AAKA,WAAO;AAAE,MAAA,KAAK,EAAL,KAAF;AAAS,MAAA,QAAQ,EAAR,QAAT;AAAmB,MAAA,SAAS,EAAT,SAAnB;AAA8B,MAAA,YAAY,EAAZ,YAA9B;AAA4C,MAAA,WAAU,EAAV;AAA5C,KAAP;AACF;AA5Ba,CAAf","sourcesContent":["<template>\n  <div class=\"error\" v-if=\"error\">{{ error }}</div>\n  <div v-if=\"playlist\" class=\"playlist-details\">\n\n    <!-- playlist information -->\n    <div class=\"playlist-info\">\n      <div class=\"cover\">\n        <img :src=\"playlist.coverUrl\">\n      </div>\n      <h2>{{ playlist.title }}</h2>\n      <p class=\"username\">Created by {{ playlist.userName }}</p>\n      <p class=\"description\">{{ playlist.description }}</p>\n      <button v-if=\"ownership\" @click=\"handleDelete\">Delete Playlist</button>\n    </div>\n\n    <!-- song list -->\n    <div class=\"song-list\">\n      <div v-if=\"!playlist.songs.length\">No songs have been added to this playlist yet.</div>\n      <div v-for=\"song in playlist.songs\" :key=\"song.id\" class=\"single-song\">\n        <div class=\"details\">\n          <h3>{{ song.title }}</h3>\n          <p>{{ song.artist }}</p>\n        </div>\n        <button v-if=\"ownership\" @click=\"handleClick(song.id)\">delete</button>\n      </div>\n      <AddSong :playlist=\"playlist\" />\n    </div>\n    \n  </div>\n</template>\n\n<script>\n// challenge\n//   - attach a click handler to the delete (song) button called handleClick\n//   - inside the function, use the updateDoc function to delete that song\n//   - you'll need to pass the song id into the handleClick function\n//   - HINT: use the filter method\n\nimport AddSong from '@/components/AddSong.vue'\nimport useStorage from '@/composables/useStorage'\nimport useDocument from '@/composables/useDocument'\nimport getDocument from '@/composables/getDocument'\nimport getUser from '@/composables/getUser'\nimport { computed } from 'vue'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  props: ['id'],\n  components: { AddSong },\n  setup(props) {\n    const { error, document: playlist } = getDocument('playlists', props.id)\n    const { user } = getUser()\n    const { deleteDoc, updateDoc } = useDocument('playlists', props.id)\n    const { deleteImage } = useStorage()\n    const router = useRouter()\n\n    const ownership = computed(() => {\n      return playlist.value \n        && user.value \n        && user.value.uid == playlist.value.userId\n    })\n\n    const handleDelete = async () => {\n      await deleteDoc()\n      await deleteImage(playlist.value.filePath)\n      router.push({ name: 'Home' })\n    }\n\n    const handleClick = async (id) => {\n      const songs = playlist.value.songs.filter((song) => song.id != id)\n      await updateDoc({ songs })\n    }\n\n    return { error, playlist, ownership, handleDelete, handleClick }\n  }\n}\n</script>\n\n<style>\n  .playlist-details {\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    gap: 80px;\n  }\n  .cover {\n    overflow: hidden;\n    border-radius: 20px;\n    position: relative;\n    padding: 160px;\n  }\n  .cover img {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    min-width: 100%;\n    min-height: 100%;\n    max-width: 200%;\n    max-height: 200%;\n  }\n  .playlist-info {\n    text-align: center;\n  }\n  .playlist-info h2 {\n    text-transform: capitalize;\n    font-size: 28px;\n    margin-top: 20px;\n  }\n  .playlist-info p {\n    margin-bottom: 20px;\n  }\n  .username {\n    color: #999;\n  }\n  .description {\n    text-align: left;\n  }\n  .single-song {\n    padding: 10px 0;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px dashed var(--secondary);\n    margin-bottom: 20px;\n  }\n</style>"],"sourceRoot":""}]}