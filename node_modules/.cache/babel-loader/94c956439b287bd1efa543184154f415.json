{"remainingRequest":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/selector/src/composables/useStorage.js","dependencies":[{"path":"/Users/moritzmurauer/dev/selector/src/composables/useStorage.js","mtime":1617292539857},{"path":"/Users/moritzmurauer/dev/selector/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tb3JpdHptdXJhdWVyL2Rldi9zZWxlY3Rvci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vw4RobmxpY2ggd2llIFRocmlsbHNlZWtlciBQcm9qZWN0CmltcG9ydCB7IHByb2plY3RTdG9yYWdlIH0gZnJvbSAnLi4vZmlyZWJhc2UvY29uZmlnJzsKaW1wb3J0IHsgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IGdldFVzZXIgZnJvbSAiLi9nZXRVc2VyIjsKCnZhciBfZ2V0VXNlciA9IGdldFVzZXIoKSwKICAgIHVzZXIgPSBfZ2V0VXNlci51c2VyOwoKdmFyIHVzZVN0b3JhZ2UgPSBmdW5jdGlvbiB1c2VTdG9yYWdlKCkgewogIHZhciBlcnJvciA9IHJlZihudWxsKTsKICB2YXIgdXJsID0gcmVmKG51bGwpOwogIHZhciBmaWxlUGF0aCA9IHJlZihudWxsKTsgLy8gaW1hZ2UgZ2V0cyB1cGxvYWRlZAoKICB2YXIgdXBsb2FkSW1hZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZmlsZSkgewogICAgICB2YXIgc3RvcmFnZVJlZiwgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZmlsZVBhdGgudmFsdWUgPSAiY292ZXJzLyIuY29uY2F0KHVzZXIudmFsdWUudWlkLCAiLyIpLmNvbmNhdChmaWxlLm5hbWUpOwogICAgICAgICAgICAgIHN0b3JhZ2VSZWYgPSBwcm9qZWN0U3RvcmFnZS5yZWYoZmlsZVBhdGgudmFsdWUpOwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBzdG9yYWdlUmVmLnB1dChmaWxlKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiByZXMucmVmLmdldERvd25sb2FkVVJMKCk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgdXJsLnZhbHVlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwLm1lc3NhZ2UpOwogICAgICAgICAgICAgIGVycm9yLnZhbHVlID0gX2NvbnRleHQudDA7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDExXV0pOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiB1cGxvYWRJbWFnZShfeCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7IC8vIGRlbGV0aW5nIGFuIGltYWdlIGZ1bmN0aW9uCgoKICB2YXIgZGVsZXRlSW1hZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihwYXRoKSB7CiAgICAgIHZhciBzdG9yYWdlUmVmOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHN0b3JhZ2VSZWYgPSBwcm9qZWN0U3RvcmFnZS5yZWYocGF0aCk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gc3RvcmFnZVJlZlsiZGVsZXRlIl0oKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gNjsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQyLnQwLm1lc3NhZ2UpOwogICAgICAgICAgICAgIGVycm9yLnZhbHVlID0gX2NvbnRleHQyLnQwOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzEsIDZdXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGRlbGV0ZUltYWdlKF94MikgewogICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICByZXR1cm4gewogICAgdXBsb2FkSW1hZ2U6IHVwbG9hZEltYWdlLAogICAgZGVsZXRlSW1hZ2U6IGRlbGV0ZUltYWdlLAogICAgdXJsOiB1cmwsCiAgICBmaWxlUGF0aDogZmlsZVBhdGgsCiAgICBlcnJvcjogZXJyb3IKICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgdXNlU3RvcmFnZTs="},{"version":3,"sources":["/Users/moritzmurauer/dev/selector/src/composables/useStorage.js"],"names":["projectStorage","ref","getUser","user","useStorage","error","url","filePath","uploadImage","file","value","uid","name","storageRef","put","res","getDownloadURL","console","log","message","deleteImage","path"],"mappings":";;;;AAAA;AAEA,SAASA,cAAT,QAA+B,oBAA/B;AACA,SAASC,GAAT,QAAoB,KAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;;eAEiBA,OAAO,E;IAAhBC,I,YAAAA,I;;AAER,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,MAAMC,KAAK,GAAGJ,GAAG,CAAC,IAAD,CAAjB;AACA,MAAMK,GAAG,GAAGL,GAAG,CAAC,IAAD,CAAf;AACA,MAAMM,QAAQ,GAAGN,GAAG,CAAC,IAAD,CAApB,CAHuB,CAKvB;;AACA,MAAMO,WAAW;AAAA,uEAAG,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAClBF,cAAAA,QAAQ,CAACG,KAAT,oBAA2BP,IAAI,CAACO,KAAL,CAAWC,GAAtC,cAA6CF,IAAI,CAACG,IAAlD;AACMC,cAAAA,UAFY,GAECb,cAAc,CAACC,GAAf,CAAmBM,QAAQ,CAACG,KAA5B,CAFD;AAAA;AAAA;AAAA,qBAKEG,UAAU,CAACC,GAAX,CAAeL,IAAf,CALF;;AAAA;AAKVM,cAAAA,GALU;AAAA;AAAA,qBAMEA,GAAG,CAACd,GAAJ,CAAQe,cAAR,EANF;;AAAA;AAMhBV,cAAAA,GAAG,CAACI,KANY;AAAA;AAAA;;AAAA;AAAA;AAAA;AAQhBO,cAAAA,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB;AACAd,cAAAA,KAAK,CAACK,KAAN;;AATgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXF,WAAW;AAAA;AAAA;AAAA,KAAjB,CANuB,CAmBvB;;;AACA,MAAMY,WAAW;AAAA,wEAAG,kBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACZR,cAAAA,UADY,GACCb,cAAc,CAACC,GAAf,CAAmBoB,IAAnB,CADD;AAAA;AAAA;AAAA,qBAIVR,UAAU,UAAV,EAJU;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAMhBI,cAAAA,OAAO,CAACC,GAAR,CAAY,aAAIC,OAAhB;AACAd,cAAAA,KAAK,CAACK,KAAN;;AAPgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXU,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAWA,SAAO;AAAEZ,IAAAA,WAAW,EAAXA,WAAF;AAAeY,IAAAA,WAAW,EAAXA,WAAf;AAA4Bd,IAAAA,GAAG,EAAHA,GAA5B;AAAiCC,IAAAA,QAAQ,EAARA,QAAjC;AAA2CF,IAAAA,KAAK,EAALA;AAA3C,GAAP;AACD,CAhCD;;AAkCA,eAAeD,UAAf","sourcesContent":["//Ã„hnlich wie Thrillseeker Project\n\nimport { projectStorage } from '../firebase/config'\nimport { ref } from \"vue\"\nimport getUser from \"./getUser\"\n\nconst { user } = getUser()\n\nconst useStorage = () => {\n  const error = ref(null)\n  const url = ref(null)\n  const filePath = ref(null)\n\n  // image gets uploaded\n  const uploadImage = async (file) => {\n    filePath.value = `covers/${user.value.uid}/${file.name}`\n    const storageRef = projectStorage.ref(filePath.value)\n\n    try {\n      const res = await storageRef.put(file)\n      url.value = await res.ref.getDownloadURL()\n    } catch (err) {\n      console.log(err.message)\n      error.value = err\n    }\n  }\n\n  // deleting an image function\n  const deleteImage = async (path) => {\n    const storageRef = projectStorage.ref(path);\n\n    try {\n      await storageRef.delete()\n    } catch (err) {\n      console.log(err.message)\n      error.value = err\n    }\n  }\n\n  return { uploadImage, deleteImage, url, filePath, error }\n}\n\nexport default useStorage;"]}]}