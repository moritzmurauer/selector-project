{"remainingRequest":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/babel-loader/lib/index.js!/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/composables/useDocument.js","dependencies":[{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/composables/useDocument.js","mtime":1606756817000},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/ap/abschluss-pruefung/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21vcml0em11cmF1ZXIvZGV2L2FwL2Fic2NobHVzcy1wcnVlZnVuZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHByb2plY3RGaXJlc3RvcmUgfSBmcm9tICcuLi9maXJlYmFzZS9jb25maWcnOwoKdmFyIHVzZURvY3VtZW50ID0gZnVuY3Rpb24gdXNlRG9jdW1lbnQoY29sbGVjdGlvbiwgaWQpIHsKICB2YXIgZXJyb3IgPSByZWYobnVsbCk7CiAgdmFyIGlzUGVuZGluZyA9IHJlZihmYWxzZSk7CiAgdmFyIGRvY1JlZiA9IHByb2plY3RGaXJlc3RvcmUuY29sbGVjdGlvbihjb2xsZWN0aW9uKS5kb2MoaWQpOwoKICB2YXIgZGVsZXRlRG9jID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaXNQZW5kaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICBlcnJvci52YWx1ZSA9IG51bGw7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGRvY1JlZi5kZWxldGUoKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGlzUGVuZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlcyk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMDsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwLm1lc3NhZ2UpOwogICAgICAgICAgICAgIGlzUGVuZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgIGVycm9yLnZhbHVlID0gJ2NvdWxkIG5vdCBkZWxldGUgdGhlIGRvY3VtZW50JzsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMiwgMTBdXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGRlbGV0ZURvYygpIHsKICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICB2YXIgdXBkYXRlRG9jID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodXBkYXRlcykgewogICAgICB2YXIgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlzUGVuZGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBudWxsOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMjsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGRvY1JlZi51cGRhdGUodXBkYXRlcyk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgaXNQZW5kaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlcyk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0Mi50MC5tZXNzYWdlKTsKICAgICAgICAgICAgICBpc1BlbmRpbmcudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICBlcnJvci52YWx1ZSA9ICdjb3VsZCBub3QgdXBkYXRlIHRoZSBkb2N1bWVudCc7CgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMiwgMTBdXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZURvYyhfeCkgewogICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpOwoKICByZXR1cm4gewogICAgZXJyb3I6IGVycm9yLAogICAgaXNQZW5kaW5nOiBpc1BlbmRpbmcsCiAgICBkZWxldGVEb2M6IGRlbGV0ZURvYywKICAgIHVwZGF0ZURvYzogdXBkYXRlRG9jCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHVzZURvY3VtZW50Ow=="},{"version":3,"sources":["/Users/moritzmurauer/dev/ap/abschluss-pruefung/src/composables/useDocument.js"],"names":["ref","projectFirestore","useDocument","collection","id","error","isPending","docRef","doc","deleteDoc","value","delete","res","console","log","message","updateDoc","updates","update"],"mappings":";;AAAA,SAASA,GAAT,QAAoB,KAApB;AACA,SAASC,gBAAT,QAAiC,oBAAjC;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,UAAD,EAAaC,EAAb,EAAoB;AAEtC,MAAIC,KAAK,GAAGL,GAAG,CAAC,IAAD,CAAf;AACA,MAAIM,SAAS,GAAGN,GAAG,CAAC,KAAD,CAAnB;AACA,MAAIO,MAAM,GAAGN,gBAAgB,CAACE,UAAjB,CAA4BA,UAA5B,EAAwCK,GAAxC,CAA4CJ,EAA5C,CAAb;;AAEA,MAAMK,SAAS;AAAA,uEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAChBH,cAAAA,SAAS,CAACI,KAAV,GAAkB,IAAlB;AACAL,cAAAA,KAAK,CAACK,KAAN,GAAc,IAAd;AAFgB;AAAA;AAAA,qBAKIH,MAAM,CAACI,MAAP,EALJ;;AAAA;AAKRC,cAAAA,GALQ;AAMdN,cAAAA,SAAS,CAACI,KAAV,GAAkB,KAAlB;AANc,+CAOPE,GAPO;;AAAA;AAAA;AAAA;AAUdC,cAAAA,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB;AACAT,cAAAA,SAAS,CAACI,KAAV,GAAkB,KAAlB;AACAL,cAAAA,KAAK,CAACK,KAAN,GAAc,+BAAd;;AAZc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAATD,SAAS;AAAA;AAAA;AAAA,KAAf;;AAgBA,MAAMO,SAAS;AAAA,wEAAG,kBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAChBX,cAAAA,SAAS,CAACI,KAAV,GAAkB,IAAlB;AACAL,cAAAA,KAAK,CAACK,KAAN,GAAc,IAAd;AAFgB;AAAA;AAAA,qBAKIH,MAAM,CAACW,MAAP,CAAcD,OAAd,CALJ;;AAAA;AAKRL,cAAAA,GALQ;AAMdN,cAAAA,SAAS,CAACI,KAAV,GAAkB,KAAlB;AANc,gDAOPE,GAPO;;AAAA;AAAA;AAAA;AAUdC,cAAAA,OAAO,CAACC,GAAR,CAAY,aAAIC,OAAhB;AACAT,cAAAA,SAAS,CAACI,KAAV,GAAkB,KAAlB;AACAL,cAAAA,KAAK,CAACK,KAAN,GAAc,+BAAd;;AAZc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAATM,SAAS;AAAA;AAAA;AAAA,KAAf;;AAgBA,SAAO;AAAEX,IAAAA,KAAK,EAALA,KAAF;AAASC,IAAAA,SAAS,EAATA,SAAT;AAAoBG,IAAAA,SAAS,EAATA,SAApB;AAA+BO,IAAAA,SAAS,EAATA;AAA/B,GAAP;AAED,CAxCD;;AA0CA,eAAed,WAAf","sourcesContent":["import { ref } from 'vue'\nimport { projectFirestore } from '../firebase/config'\n\nconst useDocument = (collection, id) => {\n\n  let error = ref(null)\n  let isPending = ref(false)\n  let docRef = projectFirestore.collection(collection).doc(id)\n\n  const deleteDoc = async () => {\n    isPending.value = true\n    error.value = null\n\n    try {\n      const res = await docRef.delete()\n      isPending.value = false\n      return res\n    }\n    catch(err) {\n      console.log(err.message)\n      isPending.value = false\n      error.value = 'could not delete the document'\n    }\n  }\n\n  const updateDoc = async (updates) => {\n    isPending.value = true\n    error.value = null\n\n    try {\n      const res = await docRef.update(updates)\n      isPending.value = false\n      return res\n    }\n    catch(err) {\n      console.log(err.message)\n      isPending.value = false\n      error.value = 'could not update the document'\n    }\n  }\n\n  return { error, isPending, deleteDoc, updateDoc }\n\n}\n\nexport default useDocument"]}]}