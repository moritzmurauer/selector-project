{"remainingRequest":"/Users/moritzmurauer/dev/selector/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/moritzmurauer/dev/selector/src/views/posts/CreatePost.vue?vue&type=style&index=0&id=3f8e7fb2&lang=css","dependencies":[{"path":"/Users/moritzmurauer/dev/selector/src/views/posts/CreatePost.vue","mtime":1672979135902},{"path":"/Users/moritzmurauer/dev/selector/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/moritzmurauer/dev/selector/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmZvcm0gewogIGJhY2tncm91bmQ6IHdoaXRlOwp9CmlucHV0W3R5cGU9ImZpbGUiXSB7CiAgYm9yZGVyOiAwOwogIHBhZGRpbmc6IDA7Cn0KCnRleHRhcmVhIHsKICBoZWlnaHQ6IDIwMHB4Owp9CgpsYWJlbCB7CiAgZm9udC1zaXplOiAxMnB4OwogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbi10b3A6IDMwcHg7Cn0KYnV0dG9uIHsKICBtYXJnaW4tdG9wOiAyMHB4Owp9Cg=="},{"version":3,"sources":["/Users/moritzmurauer/dev/selector/src/views/posts/CreatePost.vue"],"names":[],"mappings":";AA4HA,CAAC,CAAC,CAAC,EAAE;EACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACZ;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACf;;AAEA,CAAC,CAAC,CAAC,CAAC,EAAE;EACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAClB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAClB","file":"/Users/moritzmurauer/dev/selector/src/views/posts/CreatePost.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"background-create mt-16\">\n    <form @submit.prevent=\"handleSubmit\">\n      <h4>Create a New Post</h4>\n\n      <!-- text information -->\n      <input type=\"text\" required placeholder=\"Post title\" v-model=\"title\" />\n      <textarea\n        required\n        placeholder=\"Post description...\"\n        v-model=\"description\"\n      ></textarea>\n\n      <!-- select category -->\n      <div class=\"field mt-2 mb-2\">\n        <h4>Please select a category</h4>\n        <select class=\"mb-1 mt-1 pl-3 p-3 pt-1 pb-1\" v-model=\"selected\">\n          <option value=\"\" disabled selected>Select your option</option>\n          <option\n            selected=\"category?\"\n            class=\"p-3\"\n            v-for=\"option in options\"\n            :key=\"option.value\"\n            >{{ option.text }}\n          </option>\n        </select>\n        <p>Category: {{ selected }}</p>\n      </div>\n\n      <!-- upload Post image -->\n      <label>Upload Post Cover Image</label>\n      <input type=\"file\" @change=\"handleChange\" />\n      <div class=\"error\">{{ fileError }}</div>\n\n      <button v-if=\"!isPending\">Post</button>\n      <button v-else disabled>Saving...</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport useStorage from \"@/composables/useStorage\";\nimport useCollection from \"@/composables/useCollection\";\nimport getUser from \"@/composables/getUser\";\nimport { timestamp } from \"@/firebase/config\";\nimport { useRouter } from \"vue-router\";\n\nexport default {\n  setup() {\n    const { filePath, url, uploadImage } = useStorage();\n    const { error, addDoc } = useCollection(\"posts\");\n    const { user } = getUser();\n    const router = useRouter();\n\n    const title = ref(\"\");\n    const description = ref(\"\");\n    const file = ref(null);\n    const fileError = ref(null);\n    const isPending = ref(false);\n\n    // post gets created with information from form\n    const handleSubmit = async () => {\n      if (file.value) {\n        isPending.value = true;\n        await uploadImage(file.value);\n        const res = await addDoc({\n          title: title.value,\n          description: description.value,\n          userId: user.value.uid,\n          userName: user.value.displayName,\n          category: selected.value,\n          coverUrl: url.value,\n          filePath: filePath.value,\n          createdAt: timestamp(),\n        });\n        isPending.value = false;\n        if (!error.value) {\n          router.push({ name: \"Artworks\", params: { id: res.id } });\n        }\n      }\n    };\n\n    // Defines possible Category Inputs\n    const options = ref([\n      { text: \"Photography\", value: \"A\" },\n      { text: \"Illustration\", value: \"B\" },\n      { text: \"Drawing\", value: \"C\" },\n    ]);\n\n    const selected = ref(\"\");\n\n    // allowed file types\n    const types = [\"image/png\", \"image/jpeg\"];\n\n    // image upload\n    const handleChange = (e) => {\n      let selected = e.target.files[0];\n      console.log(selected);\n\n      if (selected && types.includes(selected.type)) {\n        file.value = selected;\n        fileError.value = null;\n      } else {\n        file.value = null;\n        fileError.value = \"Please select an image file (png or jpg)\";\n      }\n    };\n\n    return {\n      title,\n      description,\n      handleSubmit,\n      fileError,\n      handleChange,\n      isPending,\n      options,\n      selected,\n    };\n  },\n};\n</script>\n\n<style>\nform {\n  background: white;\n}\ninput[type=\"file\"] {\n  border: 0;\n  padding: 0;\n}\n\ntextarea {\n  height: 200px;\n}\n\nlabel {\n  font-size: 12px;\n  display: block;\n  margin-top: 30px;\n}\nbutton {\n  margin-top: 20px;\n}\n</style>\n"]}]}